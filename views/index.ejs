<html>

<head>
    <title>
        <%= title %>
    </title>
    <meta charset="UTF-8">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.datatables.net/1.13.4/css/jquery.dataTables.css" />
</head>

<body>
    <div class="text-left">
        <div class="row">
            <h2>
                <%= title %>
            </h2>
            <p><%= user %> - Rol: <%= rol %></p>
            <button type="button" class="btn btn-primary texto" onclick="location.href='login';">CERRAR SESIÓN</button>
            <div class="container text-center">
            <button type="button" id="increase" onclick="aumentarTamanoTexto();">Aumentar tamaño texto</button>
            <button type="button" id="decrease" onclick="reducirTamanoTexto();">Reducir tamaño texto</button>
        </div>
        </div>
    </div>
    <hr>
    <div class="container text-center">

        <button type="button" class="btn btn-primary texto" onclick="location.href='insert_data';">INSERTAR DATOS</button>
        <% if(rol == "Administrador"){ %>
        <button type="button" class="btn btn-primary texto" onclick="location.href='delete_user';">BORRAR USUARIOS</button>
        <button type="button" class="btn btn-primary texto" onclick="location.href='create_user';">CREAR USUARIOS</button>
        <% } %>
    </div>
    <hr>
    <table class="display texto" id="tablaDatosPaciente">
        <thead>
            <tr>
                <th>Paciente</th>
                <th>DNI</th>
                <th>Fecha y hora</th>
                <th>Glucosa</th>
                <th>Sensibilidad</th>
                <th>Hidratos</th>
                <th>Insulina a pincharse</th>
                <th>Comentario</th>
            </tr>
        </thead>
        <tbody>
            <% for(let i=0; i < results.length; i++){ %>
                <tr>
                    <td>
                        <%= results[i].nombre %> <%= results[i].apellidos %>
                    </td>
                    <td>
                        <%= results[i].dni %>
                    </td>
                    <td>
                        <%= results[i].fecha_hora %>
                    </td>
                    <td>
                        <%= results[i].glucosa %>
                    </td>
                    <td>
                        <%= results[i].sensibilidad %>
                    </td>
                    <td>
                        <%= results[i].hidratos %>
                    </td>
                    <td>
                        <%= results[i].insulina %>
                    </td>
                    <td>
                        <%= results[i].comentario %>
                    </td>
                </tr>
                <% } %>
        </tbody>
    </table>
    <div class="container text-center">
    <button type="button" class="btn btn-primary texto" onclick="location.href='download';">DESCARGAR BACKUP</button>
</div>
</body>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.7/dist/umd/popper.min.js"
    integrity="sha384-zYPOMqeu1DAVkHiLqWBUTcbYfZ8osu1Nd6Z89ify25QV9guujx43ITvfi12/QExE"
    crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.min.js"
    integrity="sha384-Y4oOpwW3duJdCWv5ly8SCFYWqFDsfob/3GkgExXKV4idmbt98QcxXYs9UoXAB7BZ"
    crossorigin="anonymous"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.0/jquery.min.js"></script>
<script src="https://cdn.datatables.net/1.13.4/js/jquery.dataTables.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.2/moment.min.js"></script>
<script>

    let table = new DataTable('#tablaDatosPaciente', {
        columnDefs: [
            {
                targets: 2,
                render: DataTable.render.date("YYYY"),
            },
        ],
    });
</script>
<script>
    var esTextoGrande = false;
    function aumentarTamanoTexto() {
        let demo_paragraph = document.getElementsByClassName('texto');
            for (let i = 0; i< demo_paragraph.length; i++){
                    demo_paragraph[i].style.fontSize = "150%";
                    esTextoGrande = true;

            }
    } 
    function reducirTamanoTexto() {
        let demo_paragraph = document.getElementsByClassName('texto');
            for (let i = 0; i< demo_paragraph.length; i++){
                    demo_paragraph[i].style.fontSize = "100%";
                    esTextoGrande = false;

            }
    } 
</script>

</html>